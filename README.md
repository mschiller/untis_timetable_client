# untis_timetable_client

UntisTimetableClient - the Ruby gem for the WebUntis Timetable API Documentation

*WebUntis timetable API*

Gets from WebUntis all data needed to display a timetable.
Can filter for by resource (student, teacher, room, class or lesson).
Can include all periods or only changed periods.
Includes current state and changes from the scheduling timetable.


How to get the data of the current timetable:

Request data providing:
- a start and end date
- a filter criteria
    - a resource id(s) for whom to view the timetable: student/teacher/room/class/lesson/period
    - a timestamp for changes only


From the response:
1. Take all periods with PeriodStatusEnum values except CANCELLED.
2. For each of these periods take all resources with ResourceStatusEnum values of REGULAR and ADDED.
3. These resources are referenced by id in the periods.
4. Look up the resource in MasterDataDto.
5. Use displayName of the resource.

Display the resulting data in a suitable format.

Version history:
- v1    2022-05     stw         Initial version
- v2    2023-02     stw         multiple ids as filter parameter / period as filter parameter / text fields in PeriodDto / deprecation of detailsUrl /
                                flag for online period / related period id for moved periods / period is modified when assigned students change
- v3    2023-07     stw         Error handling now identical to other Untis APIs


This SDK is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) project:

- API version: 2.0.0
- Package version: 1.0.0
- Generator version: 7.8.0
- Build package: org.openapitools.codegen.languages.RubyClientCodegen
For more information, please visit [https://www.untis.at](https://www.untis.at)

## Installation

### Build a gem

To build the Ruby code into a gem:

```shell
gem build untis_timetable_client.gemspec
```

Then either install the gem locally:

```shell
gem install ./untis_timetable_client-1.0.0.gem
```

(for development, run `gem install --dev ./untis_timetable_client-1.0.0.gem` to install the development dependencies)

or publish the gem to a gem hosting service, e.g. [RubyGems](https://rubygems.org/).

Finally add this to the Gemfile:

    gem 'untis_timetable_client', '~> 1.0.0'

### Install from Git

If the Ruby gem is hosted at a git repository: https://github.com/GIT_USER_ID/GIT_REPO_ID, then add the following in the Gemfile:

    gem 'untis_timetable_client', :git => 'https://github.com/GIT_USER_ID/GIT_REPO_ID.git'

### Include the Ruby code directly

Include the Ruby code directly using `-I` as follows:

```shell
ruby -Ilib script.rb
```

## Getting Started

Please follow the [installation](#installation) procedure and then run the following code:

```ruby
# Load the gem
require 'untis_timetable_client'

api_instance = UntisTimetableClient::TimetableApi.new
start = Time.parse('2013-10-20T19:20:30+01:00') # Time | Start of requested timetable in ISO 8601 format. Must be in the same school year as end.
_end = Time.parse('2013-10-20T19:20:30+01:00') # Time | End of requested timetable in ISO 8601 format. Must be in the same school year as start.
opts = {
  limit: 56, # Integer | Pagination size. No limit = 0. Limit the number of periods that are returned, starting with the earliest period. Can be used to get the next N periods.
  offset: 56, # Integer | Pagination offset. Skip the first N results. First result = 1. No pagination = 0.
  include_students: true, # Boolean | Include the students of a periods in the response.
  date_last_modified_after: Time.parse('2013-10-20T19:20:30+01:00'), # Time | Return only periods changed since this timestamp in ISO 8601 format.  Note: A change of student assignment to a studentgroup does not change the period.
  lesson: 789, # Integer | WebUntis entity ID of a lesson.
  _class: 789, # Integer | WebUntis entity ID of a class.
  room: 789, # Integer | WebUntis entity ID of a room.
  student: 789, # Integer | WebUntis entity ID of a student.
  teacher: 789, # Integer | WebUntis entity ID of a teacher.
  lesson_ext: 'lesson_ext_example', # String | External entity ID of a lesson.
  class_ext: 'class_ext_example', # String | External entity ID of a class.
  room_ext: 'room_ext_example', # String | External entity ID of a room.
  student_ext: 'student_ext_example', # String | External entity ID of a student.
  teacher_ext: 'teacher_ext_example' # String | External entity ID of a teacher.
}

begin
  #Retrieves a timetable (within the bounds of a single school year).
  result = api_instance.get_timetable(start, _end, opts)
  p result
rescue UntisTimetableClient::ApiError => e
  puts "Exception when calling TimetableApi->get_timetable: #{e}"
end

```

## Documentation for API Endpoints

All URIs are relative to *http://localhost*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*UntisTimetableClient::TimetableApi* | [**get_timetable**](docs/TimetableApi.md#get_timetable) | **GET** /api/rest/extern/v1/timetable | Retrieves a timetable (within the bounds of a single school year).
*UntisTimetableClient::TimetableApi* | [**get_timetable_v2**](docs/TimetableApi.md#get_timetable_v2) | **GET** /api/rest/extern/v2/timetable | Retrieves a timetable (within the bounds of a single school year).
*UntisTimetableClient::TimetableApi* | [**get_timetable_v3**](docs/TimetableApi.md#get_timetable_v3) | **GET** /api/rest/extern/v3/timetable | Retrieves a timetable (within the bounds of a single school year).


## Documentation for Models

 - [UntisTimetableClient::ClassDto](docs/ClassDto.md)
 - [UntisTimetableClient::DepartmentDto](docs/DepartmentDto.md)
 - [UntisTimetableClient::Error](docs/Error.md)
 - [UntisTimetableClient::ErrorCode](docs/ErrorCode.md)
 - [UntisTimetableClient::ErrorData](docs/ErrorData.md)
 - [UntisTimetableClient::ErrorResponse](docs/ErrorResponse.md)
 - [UntisTimetableClient::ExamDto](docs/ExamDto.md)
 - [UntisTimetableClient::FilterByChangesDto](docs/FilterByChangesDto.md)
 - [UntisTimetableClient::FilterByResourceDto](docs/FilterByResourceDto.md)
 - [UntisTimetableClient::FilterDto](docs/FilterDto.md)
 - [UntisTimetableClient::FilterResourceTypeEnum](docs/FilterResourceTypeEnum.md)
 - [UntisTimetableClient::HeaderDataDto](docs/HeaderDataDto.md)
 - [UntisTimetableClient::MasterDataDto](docs/MasterDataDto.md)
 - [UntisTimetableClient::MasterDataObjectDto](docs/MasterDataObjectDto.md)
 - [UntisTimetableClient::PeriodDto](docs/PeriodDto.md)
 - [UntisTimetableClient::PeriodIconEnum](docs/PeriodIconEnum.md)
 - [UntisTimetableClient::PeriodResourceDto](docs/PeriodResourceDto.md)
 - [UntisTimetableClient::PeriodStatusEnum](docs/PeriodStatusEnum.md)
 - [UntisTimetableClient::PeriodTypeEnum](docs/PeriodTypeEnum.md)
 - [UntisTimetableClient::ResourceRefDto](docs/ResourceRefDto.md)
 - [UntisTimetableClient::ResourceStatusEnum](docs/ResourceStatusEnum.md)
 - [UntisTimetableClient::RoomDto](docs/RoomDto.md)
 - [UntisTimetableClient::SchoolDto](docs/SchoolDto.md)
 - [UntisTimetableClient::StudentDto](docs/StudentDto.md)
 - [UntisTimetableClient::StudentGroupDto](docs/StudentGroupDto.md)
 - [UntisTimetableClient::SubjectDto](docs/SubjectDto.md)
 - [UntisTimetableClient::TeacherDto](docs/TeacherDto.md)
 - [UntisTimetableClient::TimeGridDto](docs/TimeGridDto.md)
 - [UntisTimetableClient::TimeGridSlotDto](docs/TimeGridSlotDto.md)
 - [UntisTimetableClient::TimetableDataDto](docs/TimetableDataDto.md)
 - [UntisTimetableClient::TimetableDto](docs/TimetableDto.md)
 - [UntisTimetableClient::ValidationError](docs/ValidationError.md)
 - [UntisTimetableClient::ValidationErrorResponse](docs/ValidationErrorResponse.md)


## Documentation for Authorization

Endpoints do not require authorization.

